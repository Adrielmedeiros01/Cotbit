<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CotBit ₿</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', sans-serif;
}

body {
    background: radial-gradient(circle at top, #0a0f3c, #020217);
    color: #fff;
}

header {
    padding: 20px 6%;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    font-size: 1.4rem;
    font-weight: 700;
}

.logo span { color: #f7931a; }

.container {
    width: 90%;
    margin: auto;
}

.main-card {
    margin-top: 20px;
    padding: 30px;
    border-radius: 16px;
    background: linear-gradient(135deg, #1a1f6f, #00c6ff);
    box-shadow: 0 0 40px rgba(0,198,255,.4);
}

.cards {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
    gap: 20px;
    margin: 30px 0;
}

.card {
    background: #0c103a;
    padding: 20px;
    border-radius: 14px;
}

.dashboard {
    background: #0c103a;
    border-radius: 14px;
    padding: 25px;
}

canvas {
    margin-top: 20px;
}

footer {
    text-align: center;
    padding: 25px;
    opacity: .6;
}
</style>
</head>

<body>

<header>
    <div class="logo">CotBit <span>₿</span></div>
</header>

<div class="container">

    <div class="main-card">
        <h1 id="btc-usd">Carregando...</h1>
        <h2 id="btc-brl"></h2>
        <p id="date"></p>
    </div>

    <div class="cards">
        <div class="card">
            <span>Bitcoin (24h)</span>
            <h2 id="btc-variation">--%</h2>
        </div>
        <div class="card">
            <span>Market Cap</span>
            <h2 id="btc-marketcap">--</h2>
        </div>
        <div class="card">
            <span>Atualização</span>
            <h2>Automática</h2>
        </div>
    </div>

    <div class="dashboard">
        <h3>Bitcoin – Últimos 7 dias</h3>
        <canvas id="btcChart"></canvas>
    </div>

</div>

<footer>
    © 2025 CotBit • Dados via CoinGecko
</footer>

<script>
const btcUSD = document.getElementById("btc-usd");
const btcBRL = document.getElementById("btc-brl");
const btcVariation = document.getElementById("btc-variation");
const btcMarketCap = document.getElementById("btc-marketcap");

async function loadBTC() {
    const priceRes = await fetch(
        "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd,brl&include_24hr_change=true&include_market_cap=true"
    );
    const priceData = await priceRes.json();

    btcUSD.innerText = `USD: $${priceData.bitcoin.usd.toLocaleString()}`;
    btcBRL.innerText = `BRL: R$ ${priceData.bitcoin.brl.toLocaleString()}`;
    btcVariation.innerText = priceData.bitcoin.usd_24h_change.toFixed(2) + "%";
    btcMarketCap.innerText = "$" + (priceData.bitcoin.usd_market_cap / 1e12).toFixed(2) + "T";
}

async function loadChart() {
    const res = await fetch(
        "https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=7"
    );
    const data = await res.json();

    const labels = data.prices.map(p =>
        new Date(p[0]).toLocaleDateString("pt-BR")
    );
    const prices = data.prices.map(p => p[1]);

    new Chart(document.getElementById("btcChart"), {
        type: "line",
        data: {
            labels,
            datasets: [{
                label: "BTC USD",
                data: prices,
                borderColor: "#00c6ff",
                backgroundColor: "rgba(0,198,255,.2)",
                fill: true,
                tension: .4
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false }
            },
            scales: {
                x: { ticks: { color: "#aaa" } },
                y: { ticks: { color: "#aaa" } }
            }
        }
    });
}

function updateDate() {
    const d = new Date();
    document.getElementById("date").innerText =
        d.toLocaleTimeString() + " - " + d.toLocaleDateString("pt-BR");
}

loadBTC();
loadChart();
updateDate();

setInterval(() => {
    loadBTC();
    updateDate();
}, 60000);
</script>

</body>
</html>